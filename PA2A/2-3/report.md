# PA2-3解题报告

## 使用的数据结构和算法

预处理时使用并查集缩点，将存在0边的节点并为一个。图使用邻接表表示。用Dijkstra算法求出1到各点、n到各点的最短路长度和数目。

每次添加一条边(u, v, w)时，可能出现的新的最短路径为1->u->v->n和1->v->u->n，将这两个路径与1->n的最短路比较，得到其中最短的，并且将对应的路径数求和即可。

## 遇到的问题和解决方案

朴素的Dijkstra会TLE，改为堆优化的版本后AC。

## 时空复杂度估算

并查集空间复杂度O(n)，时间复杂度接近O(n)。

邻接表空间复杂度O(m)。

堆优化的Dijkstra算法时间复杂度O(mlogn)。

每次查询时间复杂度O(1)。

因此总时间复杂度为O(mlogn + n + q)，总空间复杂度O(m)。